<Window x:Class="SłowotokCheat.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Słowotok Cheat v1.0" SizeToContent="Height" Width="310"
        ResizeMode="NoResize" MaxHeight="700"
        xmlns:util="clr-namespace:SłowotokCheat.Utilities"
        xmlns:c="clr-namespace:GridOfTextBoxesControl;assembly=GridOfTextBoxesControl">
    <Grid Margin="15 15">
        <Grid.Resources>
            <util:DivisionConverter x:Key="DivisionConverter" />
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            <util:InvertBooleanConverter x:Key="InvertBooleanConverter" />
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="89*"/>
            <ColumnDefinition Width="48*"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Button IsEnabled="{Binding IsBaseLoaded, Converter={StaticResource InvertBooleanConverter}}"
                Grid.Row="0" Content="Load the base of words to RAM (even 500MB)" HorizontalAlignment="Stretch"
                VerticalAlignment="Bottom" Click="LoadTheBase_Click" Grid.ColumnSpan="2" x:Name="loadButton" />
        <ProgressBar Grid.Row="1" HorizontalAlignment="Stretch" Height="5"
                     Margin="0 5 0 5" IsIndeterminate="{Binding InProgress}" Grid.ColumnSpan="2" />
        
        <Expander IsExpanded="{Binding ElementName=resultsExpander, Path=IsExpanded, Converter={StaticResource InvertBooleanConverter}}" Grid.Row="2" Header="Game board" Grid.ColumnSpan="2">
            <StackPanel>
                <c:GridOfTextBoxesControl IsEnabled="{Binding IsBaseLoaded}" x:Name="grid" ArrayOfChars="{Binding ArrayOfChars}" EnterPressed="validateRequirementsToProcessing" />
                <Button Visibility="{Binding IsBaseLoaded, Converter={StaticResource BooleanToVisibilityConverter}}"
                    Margin="0 5 0 5" Content="Find all the possibilities"
                    HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Click="validateRequirementsToProcessing" />
            </StackPanel>

        </Expander>

        <Expander x:Name="resultsExpander" IsExpanded="{Binding ShowResults}" Grid.Row="3" Header="Found matches" Grid.ColumnSpan="2">
            <ListView ScrollViewer.VerticalScrollBarVisibility="Hidden" ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                      HorizontalAlignment="Stretch" x:Name="lstFound"  FontFamily="Consolas"
                      ItemsSource="{Binding FoundWords}" Margin="0 5 0 0">
                <ListView.View>
                    <GridView>
                        <GridView.ColumnHeaderContainerStyle>
                            <Style BasedOn="{StaticResource {x:Type GridViewColumnHeader}}" TargetType="{x:Type GridViewColumnHeader}">
                                <Setter Property="IsHitTestVisible" Value="False"/>
                            </Style>
                        </GridView.ColumnHeaderContainerStyle>
                        <GridViewColumn Width="{Binding RelativeSource={RelativeSource FindAncestor, 
                                    AncestorType=ListView}, Path=ActualWidth,
                                    Converter={StaticResource DivisionConverter}, ConverterParameter=30}"
                                    Header="Length" DisplayMemberBinding="{Binding Length}" />
                        <GridViewColumn Width="{Binding RelativeSource={RelativeSource FindAncestor, 
                                    AncestorType=ListView}, Path=ActualWidth,
                                    Converter={StaticResource DivisionConverter}, ConverterParameter=70}"
                                    Header="Word" DisplayMemberBinding="{Binding Word}" />
                    </GridView>
                </ListView.View>
            </ListView>
        </Expander>
    </Grid>
</Window>
